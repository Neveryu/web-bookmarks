(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{599:function(e,s,v){"use strict";v.r(s);var _=v(10),t=Object(_.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"respond-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#respond-js"}},[e._v("#")]),e._v(" Respond.js")]),e._v(" "),s("p",[e._v("Respond.js让不支持css3 Media Query的浏览器包括IE6-IE8等其他浏览器支持媒体查询。")]),e._v(" "),s("p",[e._v("Respond.js 是一个快速、轻量的 polyfill，用于为 IE6-8 以及其它不支持 CSS3 Media Queries 的浏览器提供媒体查询的 "),s("code",[e._v("min-width")]),e._v(" 和 "),s("code",[e._v("max-width")]),e._v("特性，实现响应式网页设计（Responsive Web Design）。")]),e._v(" "),s("p",[e._v("响应式布局，理想状态是，对PC/移动各种终端进行响应。媒体查询的支持程度是IE9+以及其他现代的浏览器，但是IE8在市场当中仍然占据了比较大量的市场份额，使我们不得不进行IE低端浏览器的考虑。那么如何在 "),s("code",[e._v("IE6~8")]),e._v(" 浏览器中兼容响应式布局呢？")]),e._v(" "),s("p",[e._v("这里我们需要借助这样一个文件："),s("code",[e._v("respond.js")]),e._v(".")]),e._v(" "),s("p",[e._v("文件下载地址："),s("a",{attrs:{href:"./assets/respond.js"}},[e._v("respond.js")]),e._v(".")]),e._v(" "),s("p",[e._v("自己在阅读了官方文档之后，进行了一系列测试。友情提示各位朋友，关于"),s("b",[e._v("respond.js")]),e._v("的使用，有一些需要注意的地方，一旦不注意，在IE6-8中就无法显示出来。")]),e._v(" "),s("h3",{attrs:{id:"插件原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件原理"}},[e._v("#")]),e._v(" 插件原理")]),e._v(" "),s("p",[e._v("既然要实现响应式网页，那么就需要用到媒体查询，媒体查询的核心是"),s("code",[e._v("min-width")]),e._v(" 和 "),s("code",[e._v("max-width")]),e._v(",而IE8以下以及一些其它的浏览器不支持这两个属性，"),s("b",[e._v("respond.js")]),e._v("是怎么做的呢？")]),e._v(" "),s("ul",[s("li",[e._v("将head中所有外部引入的CSS文件路径取出来存储到一个数组当中；")]),e._v(" "),s("li",[e._v("遍历数组，并一个个发送"),s("b",[e._v("AJAX")]),e._v("请求；")]),e._v(" "),s("li",[s("b",[e._v("AJAX")]),e._v("回调后，分析"),s("b",[e._v("response")]),e._v("中的"),s("code",[e._v("media query")]),e._v("的"),s("code",[e._v("min-width")]),e._v("和"),s("code",[e._v("max-width")]),e._v("语法（注意，仅仅支持"),s("code",[e._v("min-width")]),e._v("和"),s("code",[e._v("max-width")]),e._v("），分析出viewport变化区间对应相应的css块；")]),e._v(" "),s("li",[e._v("页面初始化时和"),s("code",[e._v("window.resize")]),e._v("时，根据当前"),s("code",[e._v("viewport")]),e._v("使用相应的css块。")])]),e._v(" "),s("h3",{attrs:{id:"使用方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[e._v("#")]),e._v(" 使用方法")]),e._v(" "),s("p",[e._v("考虑到IE9是支持CSS3的，所以直接在HTML页面的head标签中添加脚本引入即可：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v('<head>\n    <link rel="stylesheet" href="style.css">\n    \x3c!--[if lt IE 9]>\n      <script src="js/respond.js"><\/script>\n    <![endif]—>\n</head>\n')])])]),s("p",[s("span",{staticStyle:{color:"red"}},[e._v("讲道理，我们是应该将js文件放在html文件的最后，但是"),s("b",[e._v("repond.js")]),e._v("文件，我还是建议你将它放在"),s("code",[e._v("head")]),e._v("中，并且放在css文件的后面。")]),e._v("\n越早引入越好，在IE下面看到页面闪屏的概率就越低，因为最初css会先渲染出来，如果"),s("b",[e._v("respond.js")]),e._v("加载得很后面，这时重新根据"),s("code",[e._v("media query")]),e._v("解析出来的css会再改变一次页面的布局等，所以看起来有闪屏的现象.")]),e._v(" "),s("h3",{attrs:{id:"核心结论"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心结论"}},[e._v("#")]),e._v(" 核心结论")]),e._v(" "),s("p",[e._v("那么此时，就可以根据基本的实现思路，得到一些书写代码时要注意的地方：")]),e._v(" "),s("ul",[s("li",[e._v("需要启动本地服务器（localhost），不能使用普通本地的url地址（file://开头）；")]),e._v(" "),s("li",[e._v("需要外部引入CSS文件，将CSS样式书写在style中是无效的；")]),e._v(" "),s("li",[e._v("由于"),s("code",[e._v("respond")]),e._v("插件是查找CSS文件，再进行处理，所以"),s("code",[e._v("respond")]),e._v("文件一定要放置在CSS文件的后面")]),e._v(" "),s("li",[e._v("另外，虽然把respond放置在head里还是在body后面都能够实现，但是建议放置在head中（具体原因在下面的文档提示中有提到）")]),e._v(" "),s("li",[e._v("最好不要为CSS设置utf-8的编码，使用默认（原因详见下面的文档提示部分）")])]),e._v(" "),s("h3",{attrs:{id:"文档提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档提示"}},[e._v("#")]),e._v(" 文档提示")]),e._v(" "),s("p",[e._v("在官方文档当中的一些提示：")]),e._v(" "),s("ul",[s("li",[e._v("越早的引入respond.js文件，也就越可能避免IE下出现的闪屏。")]),e._v(" "),s("li",[e._v("不支持嵌套的媒体查询")]),e._v(" "),s("li",[e._v("utf-8的字符编码对respond.js文件的运行有影响\n官方API原文："),s("code",[e._v("if CSS files are encoded in UTF-8 with Byte-Order-Mark, they will not work with Respond.js in IE7 or IE8.")]),e._v("\n基本含义就是："),s("b",[e._v("utf-8格式的CSS文件字符编码会对插件造成影响")]),e._v("\n但是在我使用IE6-8进行测试的时候，都能够正常显示（无论是在css文件中增加charset设置还是在link标签中增加charset设置）。因此，并不是太清楚这个位置bug的含义。")]),e._v(" "),s("li",[e._v("跨域可能会出现闪屏（还没有测试，具体情况不详）")])]),e._v(" "),s("h3",{attrs:{id:"note"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#note"}},[e._v("#")]),e._v(" NOTE")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("#####Respond.js 和 跨域（cross-domain） CSS 的问题")]),e._v(" "),s("p",[e._v("如果Respond.js和CSS文件被放在不同的域名或子域名下面（例如，使用CDN）时需要一些额外的设置。请参考Respond.js文档获取详细信息。")])]),e._v(" "),s("li",[s("p",[e._v("#####Internet Explorer 8 与 box-sizing")]),e._v(" "),s("p",[e._v("IE8不能完全支持"),s("code",[e._v("box-sizing: border-box;")]),e._v("与"),s("code",[e._v("min-width")]),e._v("、"),s("code",[e._v("max-width")]),e._v("、"),s("code",[e._v("min-height")]),e._v("或"),s("code",[e._v("max-height")]),e._v("一同使用。由于此原因，从Bootstrap v3.0.1版本开始，我们不再为"),s("code",[e._v(".container")]),e._v("使用"),s("code",[e._v("max-width")]),e._v("。")])]),e._v(" "),s("li",[s("p",[e._v("#####IE兼容模式")]),e._v(" "),s("p",[e._v("Bootstrap不支持IE的兼容模式。为了让IE浏览器运行最新的渲染模式，建议将此 标签加入到你的页面中：\n"),s("code",[e._v('<meta http-equiv="X-UA-Compatible" content="IE=Edge">')]),e._v("\n此标签被加入到所有文档页面和案例页面中，以确保在每个被支持的IE浏览器中保持最好的页面展现效果。")])]),e._v(" "),s("li",[s("p",[e._v("#####Respond.js和@import")]),e._v(" "),s("p",[e._v("Respond.js不支持通过@import引入的CSS文件。例如，Drupal一般被配置为通过@import引入CSS文件，Respond.js对其将无法起到作用。")])])]),e._v(" "),s("h3",{attrs:{id:"tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),s("p",[e._v("从respond.js的工作原理可以知道，它将head中所有外部引入的CSS文件路径取出来存储到一个数组当中；然后遍历数组，并一个个发送AJAX请求；可以看出这里必须依赖ajax请求css路径才能得到css文件中的mediaquery的内容，那ajax的跨域问题就要解决了；")]),e._v(" "),s("p",[e._v("由于我们的静态资源都是要放在cdn的，responds.js也给出了跨域方法，即引入代理页面。\n//把cross-domain/respond-proxy.html 放到cdn上\n//把cross-domain/respond.proxy.gif 放到当前域服务器上")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v('\x3c!-- Respond.js proxy on external server --\x3e\n<link href="http://externalcdn.com/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />\n\n\x3c!-- Respond.js redirect location on local server --\x3e\n<link href="/path/to/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />\n\n\x3c!-- Respond.js proxy script on local server --\x3e\n<script src="/path/to/respond.proxy.js"><\/script>\n')])])]),s("p",[e._v("###其他的支持响应式布局的插件-css3-dediaqueries.js\n"),s("code",[e._v("css3-mediaqueries.js")]),e._v("支持几乎所有的"),s("code",[e._v("media query")]),e._v("的语法。会出现闪屏。并不是很推荐使用，虽然能够支持全部的"),s("code",[e._v("mediaqueries")]),e._v(",但"),s("code",[e._v("min-width")]),e._v("和"),s("code",[e._v("max-width")]),e._v("其实就可以满足我们对响应式布局的需要。")]),e._v(" "),s("h3",{attrs:{id:"补充一点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#补充一点"}},[e._v("#")]),e._v(" 补充一点")]),e._v(" "),s("p",[e._v("if CSS files are encoded in UTF-8 with Byte-Order-Mark,they will not work with Repond.js in IE7 or IE8.\n"),s("br"),e._v("\n也就是说保存格式应该是utf-8无BOM格式，BOM会影响程序对文档的处理，正常的utf-8文档应该没事。")]),e._v(" "),s("h3",{attrs:{id:"tips-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips-2"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),s("p",[s("b",[e._v("always link stylesheets or write inline CSS before js scripts.")])]),e._v(" "),s("p",[e._v("Respond.js on Github： "),s("a",{attrs:{href:"https://github.com/scottjehl/Respond",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/scottjehl/Respond"),s("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);s.default=t.exports}}]);